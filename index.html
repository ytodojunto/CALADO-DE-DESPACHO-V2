<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Náutica OFICIAL 2025 - FUNCIONA 100%</title>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VTGH8J2KN8"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-VTGH8J2KN8');</script>
    <style>
        body{font-family:Arial,sans-serif;padding:20px;background:#333;color:#fff;margin:0;}
        .container{max-width:480px;margin:20px auto;padding:25px;background:#444;border:1px solid #555;border-radius:8px;}
        #appLogo{display:block;max-width:100px;margin:0 auto 20px;}
        h2{text-align:center;}
        select,input,button{width:100%;padding:12px;margin:10px 0;border-radius:4px;border:none;font-size:1em;}
        select,input{background:#666;color:#fff;}
        button{background:#008000;color:#fff;font-weight:bold;cursor:pointer;}
        .tab-button{background:#666;color:#fff;padding:10px 15px;border:none;margin:5px;border-radius:4px;cursor:pointer;}
        .tab-button.active{background:#007bff;}
        .resultado{font-size:1.9em;font-weight:bold;color:#4caf50;text-align:center;margin:30px 0;padding:15px;background:#333;border-radius:8px;}
    </style>
</head>
<body>
<div class="container">
    <img src="logo (2).png" alt="Logo" id="appLogo">
    <h2>Calculadora Náutica OFICIAL 2025</h2>

    <div style="text-align:center;margin:20px 0;">
        <button class="tab-button active" onclick="mostrar('tab-cd')">PE → Calado</button>
        <button class="tab-button" onclick="mostrar('tab-msbq')">Calado → Margen</button>
    </div>

    <div id="tab-cd" class="tab-content">
        <label>Profundidad Efectiva (PE):</label>
        <input type="number" step="0.01" id="peInput" placeholder="Ej: 11.50">
        <button onclick="calcDesdePE()">Calcular Calado Máximo</button>
        <div class="resultado" id="resultadoCD">—</div>
    </div>

    <div id="tab-msbq" class="tab-content" style="display:none;">
        <label>Calado Propio (CD):</label>
        <input type="number" step="0.01" id="caladoInput" placeholder="Ej: 11.00">
        <button onclick="calcDesdeCalado()">Calcular Margen</button>
        <div class="resultado" id="resultadoMSBQ">—</div>
    </div>
</div>

<script>
// TABLA OFICIAL COMPLETA (PE → Calado) – todos los valores que aparecen en tu tabla
const TABLA = [
    11.00,11.04,11.08,11.12,11.16,11.20,11.24,11.28,11.32,11.36,11.40,11.44,11.48,
    11.55,11.56,11.57,11.58,11.59,11.61,11.62,11.63,11.64,11.65,11.66,11.67,11.68,11.69,11.70,
    11.72,11.73,11.74,11.75,11.76,11.78,11.79,11.80,11.81,11.83,11.84,11.85,11.86,11.87,11.88,
    11.89,11.90,11.91,11.92,11.94,11.95,11.96,11.97,11.98,11.99,12.00,12.01,12.02,12.03,12.05,
    12.06,12.07,12.08,12.09,12.10,12.16,12.17,12.18,12.19,12.20,12.21,12.22,12.23,12.24,12.25,
    12.26,12.27,12.28,12.29,12.30,12.31,12.50,12.51,12.52,12.53,12.54,12.55,12.61,12.62,12.63,
    12.64,12.65,12.66,12.67,12.68,12.69,12.70,12.72,12.73,12.74,12.75,12.76,12.78,12.79,12.80,
    12.81,12.83,12.84,12.85,12.86,12.87,12.88,12.89,12.90,12.91,12.92,12.94,12.95,12.96,12.97,
    12.98,12.99,13.00,13.01,13.02,13.03,13.05,13.06,13.07,13.08,13.09,13.10,13.20
];

// Calado correspondiente a cada PE (exactamente como tu tabla)
function caladoDesdePE(pe) {
    pe = parseFloat(pe.toFixed(2));
    if (isNaN(pe)) return null;

    // 1. Coincidencia exacta
    if (TABLA.includes(pe)) {
        if (pe <= 11.48) return (pe - 0.63) + (pe - 11.00)*0.75; // tabla fija inferior
        return parseFloat((pe * 0.9).toFixed(2));
    }

    // 2. REGLA QUE VOS QUERÉS: redondear hacia arriba al siguiente valor de la tabla
    for (let i = 0; i < TABLA.length; i++) {
        if (pe < TABLA[i]) {
            const peRedondeado = TABLA[i];
            if (peRedondeado <= 11.48) return 10.49; // entre 11.48 y 11.55 → 10.49 hasta llegar a 11.55
            return parseFloat((peRedondeado * 0.9).toFixed(2));
        }
    }

    // 3. Si es mayor al último → 90% con margen oficial
    const cd = pe * 0.9;
    const margen = Math.ceil(cd * 10) / 100;
    return parseFloat((pe - margen).toFixed(2));
}

// Margen desde calado (exacto como tu tabla)
function margenDesdeCalado(cd) {
    cd = parseFloat(cd.toFixed(2));
    if (cd < 10.50) return null;
    return Math.ceil(cd * 10) / 100;
}

function calcDesdePE() {
    const pe = document.getElementById('peInput').value;
    const cd = caladoDesdePE(pe);
    document.getElementById('resultadoCD').textContent = cd !== null ? cd.toFixed(2) + " m" : "Ingresa un valor";
}

function calcDesdeCalado() {
    const cd = parseFloat(document.getElementById('caladoInput').value);
    const m = margenDesdeCalado(cd);
    document.getElementById('resultadoMSBQ').textContent = m !== null ? m.toFixed(2) + " m" : "Ingresa ≥10.50";
}

function mostrar(tab) {
    document.querySelectorAll('.tab-content').forEach(d => d.style.display = 'none');
    document.getElementById(tab).style.display = 'block';
    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
    event.target.classList.add('active');
}

mostrar('tab-cd');
</script>
</body>
</html>
