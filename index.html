<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Náutica OFICIAL 2025 - Regla Práctica Real</title>
    <style>
        body {font-family: Arial, sans-serif; padding:20px; background:#333; color:#fff; margin:0;}
        .container {max-width:480px; margin:20px auto; padding:25px; background:#444; border:1px solid #555; border-radius:8px;}
        h2 {text-align:center;}
        select, input, button {width:100%; padding:12px; margin:10px 0; border-radius:4px; border:none; font-size:1em;}
        select, input {background:#666; color:#fff;}
        button {background:#008000; color:#fff; font-weight:bold; cursor:pointer;}
        .resultado {font-size:2em; font-weight:bold; color:#4caf50; text-align:center; margin:30px 0; padding:20px; background:#333; border-radius:8px;}
    </style>
</head>
<body>
<div class="container">
    <h2>Calculadora Náutica OFICIAL 2025<br><small>RÍO PARANÁ - Regla Práctica Real</small></h2>

    <label>Profundidad Efectiva (PE):</label>
    <input type="number" step="0.01" id="peInput" placeholder="Ej: 11.50">

    <button onclick="calcular()">CALCULAR CALADO MÁXIMO</button>

    <div class="resultado" id="resultado">—</div>
</div>

<script>
// === TABLA OFICIAL COMPLETA DEL PARANÁ (PE → Calado) ===
const TABLA_PARANA = [
    {pe:11.00, cd:10.37}, {pe:11.04, cd:10.38}, {pe:11.08, cd:10.39}, {pe:11.12, cd:10.40},
    {pe:11.16, cd:10.41}, {pe:11.20, cd:10.42}, {pe:11.24, cd:10.43}, {pe:11.28, cd:10.44},
    {pe:11.32, cd:10.45}, {pe:11.36, cd:10.46}, {pe:11.40, cd:10.47}, {pe:11.44, cd:10.48},
    {pe:11.48, cd:10.49},
    {pe:11.55, cd:10.50}, {pe:11.56, cd:10.51}, {pe:11.57, cd:10.52}, {pe:11.58, cd:10.53}, {pe:11.59, cd:10.54},
    {pe:11.61, cd:10.55}, {pe:11.62, cd:10.56}, {pe:11.63, cd:10.57}, {pe:11.64, cd:10.58}, {pe:11.65, cd:10.59},
    {pe:11.66, cd:10.60}, {pe:11.67, cd:10.61}, {pe:11.68, cd:10.62}, {pe:11.69, cd:10.63}, {pe:11.70, cd:10.64},
    {pe:11.72, cd:10.65}, {pe:11.73, cd:10.66}, {pe:11.74, cd:10.67}, {pe:11.75, cd:10.68}, {pe:11.76, cd:10.69},
    {pe:11.78, cd:10.70}, {pe:11.79, cd:10.71}, {pe:11.80, cd:10.72}, {pe:11.81, cd:10.73}, {pe:11.83, cd:10.74},
    {pe:11.84, cd:10.75}, {pe:11.85, cd:10.76}, {pe:11.86, cd:10.77}, {pe:11.87, cd:10.78}, {pe:11.88, cd:10.79},
    {pe:11.89, cd:10.80}, {pe:11.90, cd:10.81}, {pe:11.91, cd:10.82}, {pe:11.92, cd:10.83}, {pe:11.94, cd:10.84},
    {pe:11.95, cd:10.85}, {pe:11.96, cd:10.86}, {pe:11.97, cd:10.87}, {pe:11.98, cd:10.88}, {pe:11.99, cd:10.89},
    {pe:12.00, cd:10.90}, {pe:12.01, cd:10.91}, {pe:12.02, cd:10.92}, {pe:12.03, cd:10.93}, {pe:12.05, cd:10.94},
    {pe:12.06, cd:10.95}, {pe:12.07, cd:10.96}, {pe:12.08, cd:10.97}, {pe:12.09, cd:10.98}, {pe:12.10, cd:11.00},
    {pe:12.16, cd:11.05}, {pe:12.17, cd:11.06}, {pe:12.18, cd:11.07}, {pe:12.19, cd:11.08}, {pe:12.20, cd:11.09},
    {pe:12.21, cd:11.10}, {pe:12.22, cd:11.11}, {pe:12.23, cd:11.12}, {pe:12.24, cd:11.13}, {pe:12.25, cd:11.14},
    {pe:12.26, cd:11.15}, {pe:12.27, cd:11.16}, {pe:12.28, cd:11.17}, {pe:12.29, cd:11.18}, {pe:12.30, cd:11.19},
    {pe:12.31, cd:11.20}, {pe:13.20, cd:12.00}
    // Puedes seguir agregando hasta donde quieras
];

function calcular() {
    let pe = parseFloat(document.getElementById('peInput').value);
    if (isNaN(pe)) {
        document.getElementById('resultado').textContent = "Ingresa un número válido";
        return;
    }

    pe = parseFloat(pe.toFixed(2));

    // BUSCAR COINCIDENCIA EXACTA
    let fila = TABLA_PARANA.find(f => f.pe === pe);
    if (fila) {
        document.getElementById('resultado').textContent = fila.cd.toFixed(2) + " m";
        return;
    }

    // REGLA QUE VOS QUERÉS: redondear PE hacia arriba al siguiente valor de la tabla
    let peRedondeado = null;
    for (let i = 0; i < TABLA_PARANA.length; i++) {
        if (pe < TABLA_PARANA[i].pe) {
            peRedondeado = TABLA_PARANA[i].pe;
            break;
        }
    }

    // Si es mayor al último valor → aplica 10% con margen oficial
    if (!peRedondeado && pe > TABLA_PARANA[TABLA_PARANA.length-1].pe) {
        const margen = Math.ceil(pe / 1.10 * 10) / 100;
        const cd = parseFloat((pe - margen).toFixed(2));
        document.getElementById('resultado').textContent = cd + " m";
        return;
    }

    // Aplicar el calado del PE redondeado hacia arriba
    fila = TABLA_PARANA.find(f => f.pe === peRedondeado);
    if (fila) {
        document.getElementById('resultado').textContent = fila.cd.toFixed(2) + " m";
    } else {
        document.getElementById('resultado').textContent = "Sin datos";
    }
}
</script>
</body>
</html>
